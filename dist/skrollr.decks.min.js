/*!
 * skrollr-decks 1.1.0
 * Fullpage presentation decks with scrolling
 * https://github.com/TrySound/skrollr-decks
 * 
 * Released under the MIT license
 * Copyright (c) 2015, Bogdan Chadkin <trysound@yandex.ru>
 */
!function(t){"use strict";window.skrollr?window.skrollr.decks=t(window,document,window.skrollr):console.error("`skrollr` not found")}(function(t,e,n){"use strict";function r(t,e){(t=t.toLowerCase())in b&&"function"==typeof e&&b[t].unshift(e)}function o(t,e){var n,r=b[t];for(n=r.length-1;n>-1;n--)r[n].apply({},e)}function i(i){if(m)return!1;m=!0;var a,g,b,w=t.setTimeout,A=t.clearTimeout;b=h=c({},p,i,f(e.body)),a=n.init({forceHeight:!1}),k=u(b.decks,v),y=d(v),l(),e.body.appendChild(y),a.refresh(y.children),r("change",function(e){var n=location.href.split("#")[0]+"#"+e.id;b.history&&(history.pushState?history.pushState(null,null,n):t.location.hash=n)}),a.on("render",function(t){var e=this,n=s.call(e,t);A(g),void 0!==n&&b.autoscroll&&(g=w(function(){e.animateTo(n,b)},b.delay)),o("render",[t])})}function a(t,e){var r,o,i,a=k[t],l=n.get();return l&&(l.stopAnimateTo(),a||(o=y.getElementsByClassName("skrollable-between"),1===o.length&&(i=Number(o[0].getAttribute("data-skrollr-decks-index")),a=v["up"===t?i-1:"down"===t?i+1:-1]),2===o.length&&(o=o["up"===t?0:"down"===t?1:-1],a=o?k[o.getAttribute("data-anchor-target")]:null)),a)?(r=l.relativeToAbsolute(a,"top","top")+1,e?l.setScrollTop(r,!0):l.animateTo(r,h),!0):!1}function l(){if(m){var e,r,o,i=t.innerHeight+2;for(o=v.length-1;o>-1;o--)e=v[o],e.style.height="auto",r=e.offsetHeight,e.style.height=(i>r?i:r)+"px";n.get().refresh(v)}}function s(e){if(m){var r,i,a,l,s,u,d=n.get(),c=y.getElementsByClassName("skrollable-between"),f=e.curTop,p=t.innerHeight,b=p*h.offset/100;return 1===c.length&&(r=k[c[0].getAttribute("data-anchor-target")],g!==r&&o("change",[r]),g=r),2===c.length?(i=k[c[0].getAttribute("data-anchor-target")],a=k[c[1].getAttribute("data-anchor-target")],s=d.relativeToAbsolute(i,"top","bottom"),l=d.relativeToAbsolute(a,"top","top"),"up"===e.direction&&s-b>f||l+b>f+p?(r=i,u=s-p-1):(r=a,u=l+1),g!==r&&o("change",[r]),g=r,u):void 0}}function u(t,n){{var r,o,i={};+new Date}if("string"==typeof t)for(t=e.querySelectorAll(t),o=t.length-1;o>-1;o--)r=t[o],n.unshift(r),r.id=r.id?r.id:"skroll-deck-id-"+o,i["#"+r.id]=r;return i}function d(t){var n,r,o,i=e.createElement("ul"),a=e.createElement("li");for(i.style.display="none",a.setAttribute("data-top-bottom",""),a.setAttribute("data-bottom-top",""),n=0,r=t.length;r>n;n++)o=a.cloneNode(),o.setAttribute("data-skrollr-decks-index",n),o.setAttribute("data-anchor-target","#"+t[n].id),i.appendChild(o);return i}function c(){var t,e,n,r,o=arguments[0]||{};for(t=1,e=arguments.length;e>t;t++)if(n=arguments[t],null!=n)for(r in n)n.hasOwnProperty(r)&&void 0!==n[r]&&(o[r]=n[r]);return o}function f(t){var e,n,r,o=t.attributes,i="data-skrollr-decks-",a={};for(e=o.length;e--;)n=o[e].name,r=o[e].value,0===n.indexOf(i)&&(a[n.substring(i.length)]="true"===r?!0:"false"===r?!1:isNaN(r)?r:Number(r));return a}var h,g,p={decks:".skrollr-deck",offset:10,duration:600,easing:"quadratic",delay:500,autoscroll:!0,history:!1},b={render:[],change:[]},m=!1,k={},v=[],y=e.createElement("ul");return n.addEvent(e,"keydown",function(t){var e=n.get(),r=[38,40,33,34,36,35];r.indexOf(t.keyCode)>-1&&e&&e.isAnimatingTo()&&e.stopAnimateTo()}),n.addEvent(e,"DOMContentLoaded",function(){e.querySelector("body.skrollr-decks-init")&&i()}),n.addEvent(t,"load resize",function(){l({}),g?a("#"+g.id,!0):s({})}),{init:i,animateTo:a,refresh:l,on:r}});